<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>hello</h1>
    <script>
      // 初始化数据
      let data = [
        {
          time: "星期一",
          profiles: [{ A: "a" }, { B: "b" }],
        },
        {
          time: "星期二",
          profiles: [{ A: "a" }, { B: "b" }],
        },
      ];

      // 新的条目
      let newEntries = [
        {
          time: "星期二",
          profiles: [{ C: "c" }],
        },
        {
          time: "星期三",
          profiles: [{ A: "a" }, { B: "b" }, { C: "c" }],
        },
      ];

      // 合并函数
      function mergeProfiles(existingData, newEntry) {
        let found = false;

        // 遍历现有数据
        for (let item of existingData) {
          if (item.time === newEntry.time) {
            // 如果找到相同时间，合并profiles
            item.profiles = item.profiles.concat(newEntry.profiles);
            found = true;
            break;
          }
        }

        // 如果没有找到相同时间，添加新的条目
        if (!found) {
          existingData.push(newEntry);
        }
      }

      // 处理所有新条目
      for (let entry of newEntries) {
        mergeProfiles(data, entry);
      }

      console.log(data);

      let newEntries1 = [
        {
          time: "星期二",
          profiles: [{ C: "c" }],
        },
        {
          time: "星期三",
          profiles: [{ A: "a" }, { B: "b" }, { D: "d" }],
        },
      ];

      // 处理所有新条目
      for (let entry of newEntries1) {
        mergeProfiles(data, entry);
      }

      console.log(data)
    </script>
  </body>
</html>
